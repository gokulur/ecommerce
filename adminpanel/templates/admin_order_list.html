{% extends 'admin_dashboard.html' %}
{% block content %}

<div class="main-panel">
  <div class="content-wrapper">
    <div class="col-lg-12 grid-margin stretch-card">
      <div class="card">
        <div class="card-body">
          <h4 class="card-title">Orders</h4>
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th> Order ID </th>
                  <th> Customer </th>
                  <th> Total Price </th>
                  <th> Status </th>
                  <th> Date </th>
                  <th> Actions </th>
                </tr>
              </thead>
              <tbody>
                {% for o in orders %}
                <tr>
                  <td>#{{ o.id }}</td>
                  <td>{{ o.user.username }}</td>
                  <td><strong>${{ o.total_price }}</strong></td>
                  <td>
                    {% if o.status == 'Delivered' %}
                      <span class="badge badge-success">Delivered</span>
                    {% elif o.status == 'Pending' %}
                      <span class="badge badge-warning">Pending</span>
                    {% elif o.status == 'Cancelled' %}
                      <span class="badge badge-danger">Cancelled</span>
                    {% else %}
                      <span class="badge badge-info">{{ o.status }}</span>
                    {% endif %}
                  </td>
                  <td>{{ o.created_at|date:"M d, Y" }}</td>

                  <td>
                    <a href="{% url 'admin_order_update' o.id %}" 
                       class="btn btn-sm btn-outline-primary"
                       data-toggle="tooltip" data-placement="top" 
                       title="Update Order">
                      <i class="mdi mdi-pencil"></i>
                    </a>

                    <a href="{% url 'admin_order_detail' o.id %}" 
                       class="btn btn-sm btn-outline-info"
                       data-toggle="tooltip" data-placement="top" 
                       title="View Details">
                      <i class="mdi mdi-eye"></i>
                    </a>
                  </td>
                </tr>
                {% empty %}
                <tr>
                  <td colspan="6" class="text-center text-muted">No orders found</td>
                </tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% endblock %}
