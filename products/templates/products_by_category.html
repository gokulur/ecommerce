{% extends 'base.html' %}
{% load static %}
{% block content %}
<main class="content-for-layout focus-none" id="xo-main-content" role="main" tabindex="-1">
    <div class="shopify-section" id="shopify-section-template--19284045103294__collection-title">
        <section class="xo-section xo-section--template--19284045103294__collection-title color-inverse" style="--bg-color: #f3f3f3;--margin: 0;--pt: 110;--pb: 110;--pt-mobile:50px; --pb-mobile:50px;">
            <xo-animate class="xo-section-bg" style="--img-desktop: url({% static 'cdn/shop/files/eau-de-toilette-6399434.jpg' %});--img-mobile: url({% static 'cdn/shop/files/eau-de-toilette-6399434.jpg' %});" xo-disabled="" xo-duration="1000">
                <xo-parallax class="xo-section-bg-image__item" xo-lerp-ease="0.4">
                    <xo-parallax-scroll class="xo-section-bg-image__url xo-background-lazyload" xo-keyframes="{'0%': { backgroundPositionY: '200px' },'100%': { backgroundPositionY: '-200px' },}"></xo-parallax-scroll>
                </xo-parallax>
            </xo-animate>
            <div class="collection-title">
                <xo-animate xo-cascade="">
                    <h2 class="collection-title__title">
                        {% if collection %}{{ collection.name }}{% else %}{{ category.name }}{% endif %}
                    </h2>
                </xo-animate>
                <xo-animate xo-cascade="">
                    <nav aria-label="breadcrumb" class="breadcrumb" role="navigation" style="--display-mobile:block">
                        <ol class="breadcrumb__list" style="--justify:center">
                            <li class="breadcrumb__item">
                                <a class="breadcrumb__link" href="{% url 'home' %}">Home</a>
                                <span class="breadcrumb__separator">
                                    <svg height="8" viewbox="0 0 320 512" xmlns="http://www.w3.org/2000/svg">
                                        <path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z" fill="currentColor"></path>
                                    </svg>
                                </span>
                            </li>
                            <li class="breadcrumb__item breadcrumb__item--current" style="--display:block">
                                <a aria-current="page" class="breadcrumb__link breadcrumb--current" href="#" style="--display:block">
                                    {% if collection %}{{ collection.name }}{% else %}{{ category.name }}{% endif %}
                                </a>
                            </li>
                        </ol>
                    </nav>
                </xo-animate>
                <xo-container class="xo-container--box">
                    <xo-animate xo-cascade="">
                        <xo-carousel class="collection-title-style2__carousel" xo-breakpoints="
        {
          1200: {
            perView: 5,
          },
          992: {
            perView: 4,
          },
          768: {
            perView: 2,
          },
          576: {
            perView: 1,
          },
        }
      " xo-loop="" xo-per-view="6">
                            <xo-carousel-inner>
                                <xo-carousel-list aria-label="Slider" role="list">
                                    {% for product in products %}
                                    <xo-carousel-slide aria-label="1 of 10" aria-roledescription="Slide"
                                        class="collection-title-style2__nav">
                                        <div class="collection-title-style2__nav-img">
                                            <a href="left-sidebar.html">
                                                <div class="xo-product-image">
                                                    <div class="xo-image"
                                                        style="--xo-ratio-percent: 1/1; --x-pos: %; --y-pos: %;">
                                                        {% if product.images.all %}
                                                        {% with first_image=product.images.first %}
                                                        {% if first_image %}
                                                        <img alt="{{ product.name }}" src="{{ first_image.image.url }}"
                                                            width="1000" height="1000" loading="lazy" />
                                                        {% endif %}
                                                        {% endwith %}
                                                        {% elif product.image %}
                                                        <img alt="{{ product.name }}" src="{{ product.image.url }}"
                                                            width="1000" height="1000" loading="lazy" />
                                                        {% else %}
                                                        <img alt="No Image" src="/static/img/no-image.jpg" width="1000"
                                                            height="1000" loading="lazy" />
                                                        {% endif %}
                                                    </div>
                                                </div>
                                            </a>
                                        </div>
                                        <div class="collection-title-style2__nav-text">

                                            <a href="left-sidebar.html">

                                                {{ product.name }}
                                            </a>
                                        </div>
                                    </xo-carousel-slide>
                                    {% endfor %}
                                </xo-carousel-list>
                            </xo-carousel-inner>
                            <xo-carousel-prev class="collection-title-style2__arrow-left"><button>
                                    <svg height="12" viewbox="0 0 320 512" xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"
                                            fill="currentColor"></path>
                                    </svg>
                                </button></xo-carousel-prev>
                            <xo-carousel-next class="collection-title-style2__arrow-right"><button>
                                    <svg height="12" viewbox="0 0 320 512" xmlns="http://www.w3.org/2000/svg">
                                        <path
                                            d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                            fill="currentColor"></path>
                                    </svg>
                                </button></xo-carousel-next>
                        </xo-carousel>
                    </xo-animate>
                </xo-container>
            </div>
        </section>
    </div>
    <section class="shopify-section section-collection-products" id="shopify-section-template--19284045103294__main-collection">
        <div class="xo-section xo-section--template--19284045103294__main-collection color-background-1" style="--margin: 0;--pt: 50;--pb: 50;z-index:99">
            <xo-filters-top></xo-filters-top>
            <xo-filters xo-money-format="₹1.00" xo-section-id="template--19284045103294__main-collection">
                <xo-container class="xo-container--box">
                    <xo-filters-refine class="xo-filters-refine">
                        <xo-filters-clear xo-clear-all="" id="clear-all-btn" style="cursor: pointer;">Clear all</xo-filters-clear>
                        <xo-filters-refine-clear-icon aria-label="Close">
                            <svg aria-hidden="true" fill="none" focusable="false" viewbox="0 0 12 13" width="20" xmlns="http://www.w3.org/2000/svg">
                                <path d="M8.48627 9.32917L2.82849 3.67098" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                                <path d="M2.88539 9.38504L8.42932 3.61524" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round"></path>
                            </svg>
                        </xo-filters-refine-clear-icon>
                    </xo-filters-refine>
                    <xo-grid>
                        <div aria-labelledby="verticalTitle" class="main-collection-style1__sidebar" style="--xs: 12; --sm: 12; --md: 4; --lg: 3; overflow:hidden">
                            <div class="collection-sidebar__header">
                                <h2 class="collection-sidebar__title" id="verticalTitle">COLLECTIONS</h2>
                            </div>
                             <div class="collection-sidebar__menu">
                                {% for coll in collections %}
                                <label class="field-checkbox-text" style="width: 100%; cursor: pointer; display: block;">
                                        <input class="field-checkbox-text__input collection-filter-checkbox" name="collection" type="checkbox" value="{{ coll.id }}" {% if coll.id|stringformat:"s" in selected_collections %}checked{% endif %} />
                                        <div class="field-checkbox-text__item" style="width: 100%; display: flex; align-items: center;">
                                            <span class="collection-sidebar__icon">
                                                <svg height="11" viewbox="0 0 320 512" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z" fill="rgba(var(--color-foreground))"></path>
                                                </svg>
                                            </span>
                                            <span class="field-checkbox-text__content">{{ coll.name }}</span>
                                        </div>
                                    </label>

                                {% endfor %}
                            </div>
                            <div class="fieldset-block__header">
                                <h2 class="fieldset-block__title" id="verticalTitle">PRICE</h2>
                            </div>
                            <div class="fieldset-block__content">
                                <xo-filters-field style="width:100%; padding: 0 0.1rem">
                                    <div class="xo-field-price">
                                        <xo-range class="xo-field-price__range" xo-component-name="range-price" xo-max="{{ max_price_range }}" xo-min="{{ min_price_range }}" xo-name="['filter.v.price.gte', 'filter.v.price.lte']" xo-step="1" xo-value="[{{ price_min }}, {{ price_max }}]"></xo-range>
                                        <div class="xo-field-price__input-group">
                                            <div class="xo-field-price__label">Price:</div>
                                            <xo-range-price class="xo-field-price__text" xo-component-name="range-price" xo-money-format="₹{ money }" xo-type="min">₹{{ price_min }}</xo-range-price>
                                            <span>-</span>
                                            <xo-range-price class="xo-field-price__text" xo-component-name="range-price" xo-money-format="₹{ money }" xo-type="max">₹{{ price_max }}</xo-range-price>
                                        </div>
                                    </div>
                                </xo-filters-field>
                            </div>
                            <div class="fieldset-block__header">
                                <h2 class="fieldset-block__title" id="verticalTitle">CATEGORY</h2>
                            </div>
                            <div class="fieldset-block__content fieldset-block__content--column">
                                {% for cat in categories %}
                                <xo-filters-field>
                                    <label class="field-checkbox-text">
                                        <a href="{% url 'product_by_category' cat.slug %}" class="field-checkbox-text__item" style="text-decoration: none; color: inherit; display: flex; align-items: center; width: 100%;">
                                            <span class="field-checkbox-text__icon">
                                                <svg height="12" viewbox="0 0 320 512" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z" fill="rgba(var(--color-foreground))"></path>
                                                </svg>
                                            </span>
                                            <span class="field-checkbox-text__content">{{ cat.name }}</span>
                                        </a>
                                    </label>
                                </xo-filters-field>
                                {% endfor %}
                            </div>
                        </div>
                        <div style="--xs: 12; --sm: 12; --md: 8; --lg: 9;--order-md:0">
                            <div class="main-collection-style1__header">
                                <xo-modal-trigger class="main-collection-mobile__trigger" xo-name="collection-modal-mobile">
                                    <svg id="Layer_1" style="enable-background:new 0 0 320.42 225;" version="1.1" viewbox="0 0 320.42 225" width="18" x="0px" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" y="0px">
                                        <path d="M303.92,33H16.5C7.39,33,0,25.61,0,16.5v0C0,7.39,7.39,0,16.5,0h287.42c9.11,0,16.5,7.39,16.5,16.5v0 C320.42,25.61,313.04,33,303.92,33z" fill="currentColor"></path>
                                        <path d="M256.55,129H63.87c-9.11,0-16.5-7.39-16.5-16.5v0c0-9.11,7.39-16.5,16.5-16.5h192.68c9.11,0,16.5,7.39,16.5,16.5v0 C273.05,121.61,265.66,129,256.55,129z" fill="currentColor"></path>
                                        <path d="M208.05,225h-95.67c-9.11,0-16.5-7.39-16.5-16.5v0c0-9.11,7.39-16.5,16.5-16.5h95.67c9.11,0,16.5,7.39,16.5,16.5v0 C224.55,217.61,217.16,225,208.05,225z" fill="currentColor"></path>
                                    </svg>
                                    <div class="main-collection-mobile__trigger-text">Filter</div>
                                </xo-modal-trigger>
                                <xo-modal style="z-index:999" xo-animate="slide-right" xo-name="collection-modal-mobile" xo-placement="top-left" xo-portal="">
                                    <div class="main-collection-mobile__modal-wrap">
                                        <xo-modal-trigger class="main-collection-style2__modal-close">
                                            <button aria-label="Close">
                                                <svg class="m-svg-icon--large" fill="currentColor" stroke="currentColor" viewbox="0 0 320 512" width="15" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M193.94 256L296.5 153.44l21.15-21.15c3.12-3.12 3.12-8.19 0-11.31l-22.63-22.63c-3.12-3.12-8.19-3.12-11.31 0L160 222.06 36.29 98.34c-3.12-3.12-8.19-3.12-11.31 0L2.34 120.97c-3.12 3.12-3.12 8.19 0 11.31L126.06 256 2.34 379.71c-3.12 3.12-3.12 8.19 0 11.31l22.63 22.63c3.12 3.12 8.19 3.12 11.31 0L160 289.94 262.56 392.5l21.15 21.15c3.12 3.12 8.19 3.12 11.31 0l22.63-22.63c3.12-3.12 3.12-8.19 0-11.31L193.94 256z"></path>
                                                </svg>
                                            </button>
                                        </xo-modal-trigger>
                                        <div class="main-collection-mobile__modal">
                                            
                                            <div class="collection-sidebar__header">
                                                <h2 class="collection-sidebar__title" id="verticalTitle">
                                                    CATEGORIES
                                                </h2>
                                            </div>
                                            <div class="collection-sidebar__menu">
                                                <div class="collection-sidebar__item">
                                                    <span class="collection-sidebar__icon">
                                                        <svg height="11" viewbox="0 0 320 512"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                fill="rgba(var(--color-foreground))"></path>
                                                        </svg>
                                                    </span>
                                                    <a href="../index.html" title="">Mystic Aura</a>
                                                </div>
                                                <div class="collection-sidebar__item">
                                                    <span class="collection-sidebar__icon">
                                                        <svg height="11" viewbox="0 0 320 512"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                fill="rgba(var(--color-foreground))"></path>
                                                        </svg>
                                                    </span>
                                                    <a href="../index.html" title="">Secret Bloom</a>
                                                </div>
                                                <div class="collapse-style1">
                                                    <xo-collapse-trigger class="collapse-style1__trigger"
                                                        xo-name="Velvet Mist">
                                                        <div class="collapse-style1__trigger-option">
                                                            <div class="collection-sidebar__item">
                                                                <span class="collection-sidebar__icon">
                                                                    <svg height="11" viewbox="0 0 320 512"
                                                                        xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                            fill="rgba(var(--color-foreground))"></path>
                                                                    </svg>
                                                                </span>
                                                                <a href="../index.html" title="">Velvet Mist</a>
                                                            </div>
                                                        </div>
                                                        <div class="collapse-style1__trigger-icon">
                                                            <svg fill="none" stroke="currentColor"
                                                                stroke-linecap="round" stroke-linejoin="round"
                                                                stroke-width="2" viewbox="0 0 24 22" width="15"
                                                                xmlns="http://www.w3.org/2000/svg">
                                                                <polyline points="6 9 12 15 18 9"></polyline>
                                                            </svg>
                                                        </div>
                                                    </xo-collapse-trigger>
                                                    <xo-collapse class="collapse-style1__body" xo-name="Velvet Mist">
                                                        <div class="collapse-style1__content xo-content">
                                                            <div
                                                                class="collection-sidebar__item collection-sidebar__item--child">
                                                                <span class="collection-sidebar__icon">
                                                                    <svg height="11" viewbox="0 0 320 512"
                                                                        xmlns="http://www.w3.org/2000/svg">
                                                                        <path
                                                                            d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                            fill="rgba(var(--color-foreground))"></path>
                                                                    </svg>
                                                                </span>
                                                                <a href="../index.html" title="">Silent Breeze</a>
                                                            </div>
                                                        </div>
                                                    </xo-collapse>
                                                </div>
                                                <div class="collection-sidebar__item">
                                                    <span class="collection-sidebar__icon">
                                                        <svg height="11" viewbox="0 0 320 512"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                fill="rgba(var(--color-foreground))"></path>
                                                        </svg>
                                                    </span>
                                                    <a href="../index.html" title="">Golden Whisper</a>
                                                </div>
                                                <div class="collection-sidebar__item">
                                                    <span class="collection-sidebar__icon">
                                                        <svg height="11" viewbox="0 0 320 512"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                fill="rgba(var(--color-foreground))"></path>
                                                        </svg>
                                                    </span>
                                                    <a href="../index.html" title="">Pure Essence</a>
                                                </div>
                                                <div class="collection-sidebar__item">
                                                    <span class="collection-sidebar__icon">
                                                        <svg height="11" viewbox="0 0 320 512"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                fill="rgba(var(--color-foreground))"></path>
                                                        </svg>
                                                    </span>
                                                    <a href="../index.html" title="">Eternal Charm</a>
                                                </div>
                                                <div class="collection-sidebar__item">
                                                    <span class="collection-sidebar__icon">
                                                        <svg height="11" viewbox="0 0 320 512"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                fill="rgba(var(--color-foreground))"></path>
                                                        </svg>
                                                    </span>
                                                    <a href="../index.html" title="">Midnight Glow</a>
                                                </div>
                                                <div class="collection-sidebar__item">
                                                    <span class="collection-sidebar__icon">
                                                        <svg height="11" viewbox="0 0 320 512"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                fill="rgba(var(--color-foreground))"></path>
                                                        </svg>
                                                    </span>
                                                    <a href="../index.html" title="">Crystal Veil</a>
                                                </div>
                                                <div class="collection-sidebar__item">
                                                    <span class="collection-sidebar__icon">
                                                        <svg height="11" viewbox="0 0 320 512"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                fill="rgba(var(--color-foreground))"></path>
                                                        </svg>
                                                    </span>
                                                    <a href="../index.html" title="">Amber Soul</a>
                                                </div>
                                                <div class="collection-sidebar__item">
                                                    <span class="collection-sidebar__icon">
                                                        <svg height="11" viewbox="0 0 320 512"
                                                            xmlns="http://www.w3.org/2000/svg">
                                                            <path
                                                                d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                fill="rgba(var(--color-foreground))"></path>
                                                        </svg>
                                                    </span>
                                                    <a href="../index.html" title="">Dream Petals</a>
                                                </div>
                                            </div>
                                            <div class="fieldset-block__header">
                                                <h2 class="fieldset-block__title" id="verticalTitle">
                                                    PRICE
                                                </h2>
                                            </div>
                                            <div class="fieldset-block__content">
                                                <xo-filters-field style="width:100%; padding: 0 0.1rem">
                                                    <div class="xo-field-price">
                                                        <xo-range class="xo-field-price__range"
                                                            xo-component-name="range-price" xo-max="100.00" xo-min="0"
                                                            xo-name="['filter.v.price.gte', 'filter.v.price.lte']"
                                                            xo-step="0.1" xo-value="[0, 100.00]"></xo-range>
                                                        <div class="xo-field-price__input-group">
                                                            <div class="xo-field-price__label">Price:</div>
                                                            <xo-range-price class="xo-field-price__text"
                                                                xo-component-name="range-price"
                                                                xo-money-format="${ money }"
                                                                xo-type="min"></xo-range-price>
                                                            <span>-</span>
                                                            <xo-range-price class="xo-field-price__text"
                                                                xo-component-name="range-price"
                                                                xo-money-format="${ money }"
                                                                xo-type="max"></xo-range-price>
                                                        </div>
                                                    </div>
                                                </xo-filters-field>
                                            </div>
                                            <div class="fieldset-block__header">
                                                <h2 class="fieldset-block__title" id="verticalTitle">
                                                    COLOR
                                                </h2>
                                            </div>
                                            <div class="fieldset-block__content fieldset-block__content--color">
                                                <xo-filters-field>
                                                    <label class="field-checkbox-color">
                                                        <input class="field-checkbox-color__input"
                                                            name="filter.v.t.shopify.color-pattern" type="checkbox"
                                                            value="gid://shopify/TaxonomyValue/9" xo-label="Green" />
                                                        <div class="field-checkbox-color__item">
                                                            <span class="field-checkbox-color__content" style="
        --color:#b5d6cb;"></span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-color">
                                                        <input class="field-checkbox-color__input"
                                                            name="filter.v.t.shopify.color-pattern" type="checkbox"
                                                            value="gid://shopify/TaxonomyValue/12" xo-label="Purple" />
                                                        <div class="field-checkbox-color__item">
                                                            <span class="field-checkbox-color__content" style="
        --color:#403184;"></span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-color">
                                                        <input class="field-checkbox-color__input"
                                                            name="filter.v.t.shopify.color-pattern" type="checkbox"
                                                            value="gid://shopify/TaxonomyValue/3" xo-label="White" />
                                                        <div class="field-checkbox-color__item">
                                                            <span class="field-checkbox-color__content" style="
        --color:#FFFFFF;"></span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                            </div>
                                            <div class="fieldset-block__header">
                                                <h2 class="fieldset-block__title" id="verticalTitle">
                                                    TAG
                                                </h2>
                                            </div>
                                            <div class="fieldset-block__content">
                                                <xo-filters-field>
                                                    <label class="field-checkbox-block">
                                                        <input class="field-checkbox-block__input" name="filter.p.tag"
                                                            type="checkbox" value="Hot" xo-label="Hot" />
                                                        <div
                                                            class="field-checkbox-block__item field-checkbox-block__item--tag">
                                                            <span class="field-checkbox-block__content">Hot</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-block">
                                                        <input class="field-checkbox-block__input" name="filter.p.tag"
                                                            type="checkbox" value="Innovation" xo-label="Innovation" />
                                                        <div
                                                            class="field-checkbox-block__item field-checkbox-block__item--tag">
                                                            <span
                                                                class="field-checkbox-block__content">Innovation</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-block">
                                                        <input class="field-checkbox-block__input" name="filter.p.tag"
                                                            type="checkbox" value="Lifestyle" xo-label="Lifestyle" />
                                                        <div
                                                            class="field-checkbox-block__item field-checkbox-block__item--tag">
                                                            <span class="field-checkbox-block__content">Lifestyle</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-block">
                                                        <input class="field-checkbox-block__input" name="filter.p.tag"
                                                            type="checkbox" value="Quality" xo-label="Quality" />
                                                        <div
                                                            class="field-checkbox-block__item field-checkbox-block__item--tag">
                                                            <span class="field-checkbox-block__content">Quality</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-block">
                                                        <input class="field-checkbox-block__input" name="filter.p.tag"
                                                            type="checkbox" value="Solutions" xo-label="Solutions" />
                                                        <div
                                                            class="field-checkbox-block__item field-checkbox-block__item--tag">
                                                            <span class="field-checkbox-block__content">Solutions</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-block">
                                                        <input class="field-checkbox-block__input" name="filter.p.tag"
                                                            type="checkbox" value="Sustainability"
                                                            xo-label="Sustainability" />
                                                        <div
                                                            class="field-checkbox-block__item field-checkbox-block__item--tag">
                                                            <span
                                                                class="field-checkbox-block__content">Sustainability</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                            </div>
                                            <div class="fieldset-block__header">
                                                <h2 class="fieldset-block__title" id="verticalTitle">
                                                    BRAND
                                                </h2>
                                            </div>
                                            <div class="fieldset-block__content fieldset-block__content--column">
                                                <xo-filters-field>
                                                    <label class="field-checkbox-text">
                                                        <input class="field-checkbox-text__input" name="filter.p.vendor"
                                                            type="checkbox" value="EcoSphere" xo-label="EcoSphere" />
                                                        <div class="field-checkbox-text__item">
                                                            <span class="field-checkbox-text__icon">
                                                                <svg height="12" viewbox="0 0 320 512"
                                                                    xmlns="http://www.w3.org/2000/svg">
                                                                    <path
                                                                        d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                        fill="rgba(var(--color-foreground))"></path>
                                                                </svg>
                                                            </span>
                                                            <span class="field-checkbox-text__content">EcoSphere</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-text">
                                                        <input class="field-checkbox-text__input" name="filter.p.vendor"
                                                            type="checkbox" value="HorizonEdge"
                                                            xo-label="HorizonEdge" />
                                                        <div class="field-checkbox-text__item">
                                                            <span class="field-checkbox-text__icon">
                                                                <svg height="12" viewbox="0 0 320 512"
                                                                    xmlns="http://www.w3.org/2000/svg">
                                                                    <path
                                                                        d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                        fill="rgba(var(--color-foreground))"></path>
                                                                </svg>
                                                            </span>
                                                            <span
                                                                class="field-checkbox-text__content">HorizonEdge</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-text">
                                                        <input class="field-checkbox-text__input" name="filter.p.vendor"
                                                            type="checkbox" value="LuxeVibe" xo-label="LuxeVibe" />
                                                        <div class="field-checkbox-text__item">
                                                            <span class="field-checkbox-text__icon">
                                                                <svg height="12" viewbox="0 0 320 512"
                                                                    xmlns="http://www.w3.org/2000/svg">
                                                                    <path
                                                                        d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                        fill="rgba(var(--color-foreground))"></path>
                                                                </svg>
                                                            </span>
                                                            <span class="field-checkbox-text__content">LuxeVibe</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-text">
                                                        <input class="field-checkbox-text__input" name="filter.p.vendor"
                                                            type="checkbox" value="NovaCrest" xo-label="NovaCrest" />
                                                        <div class="field-checkbox-text__item">
                                                            <span class="field-checkbox-text__icon">
                                                                <svg height="12" viewbox="0 0 320 512"
                                                                    xmlns="http://www.w3.org/2000/svg">
                                                                    <path
                                                                        d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                        fill="rgba(var(--color-foreground))"></path>
                                                                </svg>
                                                            </span>
                                                            <span class="field-checkbox-text__content">NovaCrest</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-text">
                                                        <input class="field-checkbox-text__input" name="filter.p.vendor"
                                                            type="checkbox" value="TrueHaven" xo-label="TrueHaven" />
                                                        <div class="field-checkbox-text__item">
                                                            <span class="field-checkbox-text__icon">
                                                                <svg height="12" viewbox="0 0 320 512"
                                                                    xmlns="http://www.w3.org/2000/svg">
                                                                    <path
                                                                        d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                        fill="rgba(var(--color-foreground))"></path>
                                                                </svg>
                                                            </span>
                                                            <span class="field-checkbox-text__content">TrueHaven</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                                <xo-filters-field>
                                                    <label class="field-checkbox-text">
                                                        <input class="field-checkbox-text__input" name="filter.p.vendor"
                                                            type="checkbox" value="VertexCore" xo-label="VertexCore" />
                                                        <div class="field-checkbox-text__item">
                                                            <span class="field-checkbox-text__icon">
                                                                <svg height="12" viewbox="0 0 320 512"
                                                                    xmlns="http://www.w3.org/2000/svg">
                                                                    <path
                                                                        d="M278.6 233.4c12.5 12.5 12.5 32.8 0 45.3l-160 160c-12.5 12.5-32.8 12.5-45.3 0s-12.5-32.8 0-45.3L210.7 256 73.4 118.6c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0l160 160z"
                                                                        fill="rgba(var(--color-foreground))"></path>
                                                                </svg>
                                                            </span>
                                                            <span class="field-checkbox-text__content">VertexCore</span>
                                                        </div>
                                                    </label>
                                                </xo-filters-field>
                                            </div>

                                        </div>
                                    
                                    </div>
                                </xo-modal>
                                <div class="xo-facets">
                                    <div class="xo-facets__toggle">
                                        <xo-toggle-trigger xo-name="group-button">
                                            <button>
                                                <svg data-name="Layer 1" id="Layer_1" viewbox="0 0 10 10" width="12" xmlns="http://www.w3.org/2000/svg">
                                                    <defs><style>.cls-1 {fill: #231f20;stroke-width: 0px;}</style></defs>
                                                    <rect class="cls-1" height="4.5" width="4.5"></rect>
                                                    <rect class="cls-1" height="4.5" width="4.5" x="5.5"></rect>
                                                    <rect class="cls-1" height="4.5" width="4.5" y="5.5"></rect>
                                                    <rect class="cls-1" height="4.5" width="4.5" x="5.5" y="5.5"></rect>
                                                </svg>
                                            </button>
                                        </xo-toggle-trigger>
                                        <xo-toggle class="xo-facets__toggle-content" xo-name="group-button">
                                            <xo-group class="xo-facets__group-button">
                                                <xo-group-button class="xo-facets__button-item">2</xo-group-button>
                                                <xo-group-button class="xo-facets__button-item" xo-active="">3</xo-group-button>
                                                <xo-group-button class="xo-facets__button-item">4</xo-group-button>
                                                <xo-group-button class="xo-facets__button-item">5</xo-group-button>
                                                <xo-group-button class="xo-facets__button-item">6</xo-group-button>
                                            </xo-group>
                                        </xo-toggle>
                                    </div>
                                    <div class="xo-facets__item">
                                        <div class="xo-field-select-custom-filter">
                                            <xo-popover-trigger class="xo-field-select-custom-filter__trigger" xo-name="filter-select-sort">
                                                <xo-filters-sort-by-selected class="xo-field-select-custom-filter__name">
                                                    {% if sort_by == 'best-selling' %}Best selling
                                                    {% elif sort_by == 'title-ascending' %}Alphabetically, A-Z
                                                    {% elif sort_by == 'title-descending' %}Alphabetically, Z-A
                                                    {% elif sort_by == 'price-ascending' %}Price, low to high
                                                    {% elif sort_by == 'price-descending' %}Price, high to low
                                                    {% elif sort_by == 'created-ascending' %}Date, old to new
                                                    {% elif sort_by == 'created-descending' %}Date, new to old
                                                    {% else %}Featured{% endif %}
                                                </xo-filters-sort-by-selected>
                                                <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewbox="0 0 24 22" width="20" xmlns="http://www.w3.org/2000/svg">
                                                    <polyline points="6 9 12 15 18 9"></polyline>
                                                </svg>
                                            </xo-popover-trigger>
                                            <xo-popover class="xo-field-select-custom-filter__popover xo-scrollbar" xo-modal-scroll-selector=".xo-scrollbar" xo-name="filter-select-sort" xo-placement="bottom-right">
                                                <xo-filters-field><label class="xo-field-select-custom-filter__check"><input {% if sort_by == 'manual' or not sort_by %}checked{% endif %} class="xo-field-select-custom-filter__input sort-radio" name="sort_by" type="radio" value="manual" xo-label="Featured" /><span class="xo-field-select-custom-filter__label">Featured</span></label></xo-filters-field>
                                                <xo-filters-field><label class="xo-field-select-custom-filter__check"><input {% if sort_by == 'best-selling' %}checked{% endif %} class="xo-field-select-custom-filter__input sort-radio" name="sort_by" type="radio" value="best-selling" xo-label="Best selling" /><span class="xo-field-select-custom-filter__label">Best selling</span></label></xo-filters-field>
                                                <xo-filters-field><label class="xo-field-select-custom-filter__check"><input {% if sort_by == 'title-ascending' %}checked{% endif %} class="xo-field-select-custom-filter__input sort-radio" name="sort_by" type="radio" value="title-ascending" xo-label="Alphabetically, A-Z" /><span class="xo-field-select-custom-filter__label">Alphabetically, A-Z</span></label></xo-filters-field>
                                                <xo-filters-field><label class="xo-field-select-custom-filter__check"><input {% if sort_by == 'title-descending' %}checked{% endif %} class="xo-field-select-custom-filter__input sort-radio" name="sort_by" type="radio" value="title-descending" xo-label="Alphabetically, Z-A" /><span class="xo-field-select-custom-filter__label">Alphabetically, Z-A</span></label></xo-filters-field>
                                                <xo-filters-field><label class="xo-field-select-custom-filter__check"><input {% if sort_by == 'price-ascending' %}checked{% endif %} class="xo-field-select-custom-filter__input sort-radio" name="sort_by" type="radio" value="price-ascending" xo-label="Price, low to high" /><span class="xo-field-select-custom-filter__label">Price, low to high</span></label></xo-filters-field>
                                                <xo-filters-field><label class="xo-field-select-custom-filter__check"><input {% if sort_by == 'price-descending' %}checked{% endif %} class="xo-field-select-custom-filter__input sort-radio" name="sort_by" type="radio" value="price-descending" xo-label="Price, high to low" /><span class="xo-field-select-custom-filter__label">Price, high to low</span></label></xo-filters-field>
                                                <xo-filters-field><label class="xo-field-select-custom-filter__check"><input {% if sort_by == 'created-ascending' %}checked{% endif %} class="xo-field-select-custom-filter__input sort-radio" name="sort_by" type="radio" value="created-ascending" xo-label="Date, old to new" /><span class="xo-field-select-custom-filter__label">Date, old to new</span></label></xo-filters-field>
                                                <xo-filters-field><label class="xo-field-select-custom-filter__check"><input {% if sort_by == 'created-descending' %}checked{% endif %} class="xo-field-select-custom-filter__input sort-radio" name="sort_by" type="radio" value="created-descending" xo-label="Date, new to old" /><span class="xo-field-select-custom-filter__label">Date, new to old</span></label></xo-filters-field>
                                            </xo-popover>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <xo-filters-content>
                                <div>
                                    <xo-grid class="filters-content__grid" style="--xs: 2; --sm: 2; --md: 2; --lg: 3">
                                        {% for product in page_obj %}
                                        <xo-product xo-product-id="{{ product.id }}" xo-section-id="template--main-collection">
                                            <xo-animate class="xo-product-card xo-product-card--style9 color-background-1" xo-cascade="">
                                                <div class="xo-product-card__header xo-product-card__header--style9">
                                                    <a href="{{ product.get_absolute_url }}">
                                                        <xo-product-media style="--xo-auto-play: 1500ms" xo-binding="img" xo-carousel-active-index="0" xo-carousel-autoplay="1500" xo-carousel-bullet-content="&lt;span class='xo-product-card__bullet'&gt;&lt;/span&gt;" xo-carousel-pagination-enabled="" xo-type="auto">
                                                            <div class="xo-product-image">
                                                                <div class="xo-image" style="--xo-ratio-percent: 1/1; --x-pos: %; --y-pos: %;">
                                                                    {% if product.images.all %}
                                                                    {% with first_image=product.images.first %}
                                                                    <img alt="{{ product.name }}" src="{{ first_image.image.url }}" width="1000" height="1000" loading="lazy" />
                                                                    {% endwith %}
                                                                    {% elif product.image %}
                                                                    <img alt="{{ product.name }}" src="{{ product.image.url }}" width="1000" height="1000" loading="lazy" />
                                                                    {% else %}
                                                                    <img alt="No Image" src="/static/img/no-image.jpg" width="1000" height="1000" loading="lazy" />
                                                                    {% endif %}
                                                                </div>
                                                            </div>
                                                        </xo-product-media>
                                                    </a>
                                                    <div class="xo-product-card__badge">
                                                        {% if product.stock == 0 or not product.available %}
                                                        <div class="xo-badge-sold-out">
                                                            <span class="xo-badge-sold-out__title" id="Badge-{{ product.id }}">Sold out</span>
                                                        </div>
                                                        {% else %}
                                                        <div class="xo-badge-sale" id="Badge-{{ product.id }}">Sale</div>
                                                        {% endif %}
                                                    </div>
                                                </div>
                                                <div class="xo-product-card__information">
                                                    <h2 class="xo-product-card__title" id="title-{{ product.id }}">
                                                        <a aria-labelledby="CardLink-{{ product.id }}" href="{{ product.get_absolute_url }}" id="CardLink-{{ product.id }}">{{ product.name }}</a>
                                                    </h2>
                                                    <div class="xo-product-card__price">
                                                        <div class="xo-product-card__price-inner" xo-binding="price">
                                                            <div class="xo-price" role="status">
                                                                <div class="xo-price__container">
                                                                    <div class="xo-price__sale xo-price__sale--column">
                                                                        <span class="xo-price__item xo-price__item--accent">₹{{ product.price }}</span>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </xo-animate>
                                        </xo-product>
                                        {% empty %}
                                        <div style="grid-column: 1/-1; text-align: center; padding: 3rem;">
                                            <h3>No products found</h3>
                                            <p>Try adjusting your filters</p>
                                        </div>
                                        {% endfor %}
                                    </xo-grid>
                                    <xo-filters-paginate>
                                        <nav aria-label="Pagination" class="xo-pagination">
                                            <ul class="xo-pagination__list" role="list">
                                                {% if page_obj.has_previous %}
                                                <li>
                                                    <a aria-label="Previous page" class="xo-pagination__page xo-pagination__page--prev" href="?page={{ page_obj.previous_page_number }}{% for key, values in request.GET.lists %}{% if key != 'page' %}{% for value in values %}&{{ key }}={{ value }}{% endfor %}{% endif %}{% endfor %}">
                                                        <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg">
                                                            <polyline points="15 18 9 12 15 6"></polyline>
                                                        </svg>
                                                    </a>
                                                </li>
                                                {% endif %}
                                                {% for page in page_obj.paginator.page_range %}
                                                {% if page == page_obj.number %}
                                                <li><span aria-current="page" aria-label="Page {{ page }}" class="xo-pagination__page xo-pagination__page--current">{{ page }}</span></li>
                                                {% else %}
                                                <li><a aria-label="Page {{ page }}" class="xo-pagination__page" href="?page={{ page }}{% for key, values in request.GET.lists %}{% if key != 'page' %}{% for value in values %}&{{ key }}={{ value }}{% endfor %}{% endif %}{% endfor %}">{{ page }}</a></li>
                                                {% endif %}
                                                {% endfor %}
                                                {% if page_obj.has_next %}
                                                <li>
                                                    <a aria-label="Next page" class="xo-pagination__page xo-pagination__page--next" href="?page={{ page_obj.next_page_number }}{% for key, values in request.GET.lists %}{% if key != 'page' %}{% for value in values %}&{{ key }}={{ value }}{% endfor %}{% endif %}{% endfor %}">
                                                        <svg fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" viewBox="0 0 24 24" width="20" xmlns="http://www.w3.org/2000/svg">
                                                            <polyline points="9 18 15 12 9 6"></polyline>
                                                        </svg>
                                                    </a>
                                                </li>
                                                {% endif %}
                                            </ul>
                                        </nav>
                                    </xo-filters-paginate>
                                </div>
                            </xo-filters-content>
                        </div>
                    </xo-grid>
                </xo-container>
            </xo-filters>
        </div>
    </section>
</main>

<style>
.price-range-slider {
    position: relative;
    height: 40px;
    margin: 20px 0;
}
.price-range-slider input[type="range"] {
    position: absolute;
    width: 100%;
    height: 5px;
    background: transparent;
    pointer-events: none;
    -webkit-appearance: none;
}
.price-range-slider input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 15px;
    height: 15px;
    background: #000;
    cursor: pointer;
    border-radius: 50%;
    pointer-events: auto;
    position: relative;
    z-index: 2;
}
.price-range-slider input[type="range"]::-moz-range-thumb {
    width: 15px;
    height: 15px;
    background: #000;
    cursor: pointer;
    border-radius: 50%;
    pointer-events: auto;
    position: relative;
    z-index: 2;
    border: none;
}
.price-range-slider input[type="range"]::-webkit-slider-runnable-track {
    width: 100%;
    height: 5px;
    background: #ddd;
    border-radius: 5px;
}
.price-range-slider input[type="range"]::-moz-range-track {
    width: 100%;
    height: 5px;
    background: #ddd;
    border-radius: 5px;
}
.xo-field-select-custom-filter__popover.xo-active {
    display: block !important;
    opacity: 1 !important;
    visibility: visible !important;
}
.collection-filter-checkbox {
    margin-right: 10px;
}
.field-checkbox-text__input:checked ~ .field-checkbox-text__item {
    font-weight: 600;
}
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const priceRangeEl = document.querySelector('xo-range[xo-component-name="range-price"]');
    
    if (priceRangeEl) {
        const min = parseFloat(priceRangeEl.getAttribute('xo-min') || 0);
        const max = parseFloat(priceRangeEl.getAttribute('xo-max') || 1000);
        let currentMin = parseFloat('{{ price_min }}') || min;
        let currentMax = parseFloat('{{ price_max }}') || max;
        
        priceRangeEl.innerHTML = `
            <div class="price-range-slider">
                <input type="range" class="price-min" min="${min}" max="${max}" value="${currentMin}" step="1">
                <input type="range" class="price-max" min="${min}" max="${max}" value="${currentMax}" step="1">
            </div>
        `;
        
        const minSlider = priceRangeEl.querySelector('.price-min');
        const maxSlider = priceRangeEl.querySelector('.price-max');
        const minText = document.querySelector('xo-range-price[xo-type="min"]');
        const maxText = document.querySelector('xo-range-price[xo-type="max"]');
        
        function updatePriceDisplay() {
            if (minText) minText.textContent = `₹${Math.round(currentMin)}`;
            if (maxText) maxText.textContent = `₹${Math.round(currentMax)}`;
        }
        
        minSlider.addEventListener('input', function() {
            currentMin = parseFloat(this.value);
            if (currentMin > currentMax) {
                currentMin = currentMax;
                this.value = currentMin;
            }
            updatePriceDisplay();
        });
        
        maxSlider.addEventListener('input', function() {
            currentMax = parseFloat(this.value);
            if (currentMax < currentMin) {
                currentMax = currentMin;
                this.value = currentMax;
            }
            updatePriceDisplay();
        });
        
        minSlider.addEventListener('change', applyFilters);
        maxSlider.addEventListener('change', applyFilters);
        
        updatePriceDisplay();
    }
    
    const collectionCheckboxes = document.querySelectorAll('.collection-filter-checkbox');
    collectionCheckboxes.forEach(checkbox => {
        checkbox.addEventListener('change', applyFilters);
    });
    
    const sortRadios = document.querySelectorAll('.sort-radio');
    const sortTrigger = document.querySelector('.xo-field-select-custom-filter__trigger');
    const sortPopover = document.querySelector('.xo-field-select-custom-filter__popover');
    
    if (sortTrigger && sortPopover) {
        sortTrigger.addEventListener('click', function(e) {
            e.stopPropagation();
            sortPopover.classList.toggle('xo-active');
        });
        
        document.addEventListener('click', function(e) {
            if (!sortTrigger.contains(e.target) && !sortPopover.contains(e.target)) {
                sortPopover.classList.remove('xo-active');
            }
        });
    }
    
    sortRadios.forEach(radio => {
        radio.addEventListener('change', function() {
            const selectedText = this.parentElement.querySelector('.xo-field-select-custom-filter__label').textContent;
            const sortDisplay = document.querySelector('xo-filters-sort-by-selected');
            if (sortDisplay) {
                sortDisplay.textContent = selectedText;
            }
            if (sortPopover) {
                sortPopover.classList.remove('xo-active');
            }
            applyFilters();
        });
    });
    
    const clearAllBtn = document.getElementById('clear-all-btn');
    if (clearAllBtn) {
        clearAllBtn.addEventListener('click', function() {
            const url = new URL(window.location.href);
            window.location.href = url.pathname;
        });
    }
    
    function applyFilters() {
        const url = new URL(window.location.href);
        const params = new URLSearchParams();
        
        const minSlider = document.querySelector('.price-min');
        const maxSlider = document.querySelector('.price-max');
        
        if (minSlider && maxSlider) {
            params.append('price_min', Math.round(minSlider.value));
            params.append('price_max', Math.round(maxSlider.value));
        }
        
        const selectedCollections = Array.from(collectionCheckboxes)
            .filter(cb => cb.checked)
            .map(cb => cb.value);
        
        selectedCollections.forEach(id => {
            params.append('collection', id);
        });
        
        const selectedSort = document.querySelector('.sort-radio:checked');
        if (selectedSort) {
            params.append('sort_by', selectedSort.value);
        }
        
        params.append('page', '1');
        
        window.location.href = `${url.pathname}?${params.toString()}`;
    }
});
</script>
{% endblock %}